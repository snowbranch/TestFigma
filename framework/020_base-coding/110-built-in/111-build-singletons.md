# 内置单例

## 随机数发生器

---
## 随机数发生器：单元测试的利器

在单元测试中，我们经常需要模拟各种场景，包括处理随机数据。然而，直接使用系统自带的随机数生成器可能会导致测试结果不确定，难以复现和调试。为了解决这个问题，我们需要一个**可控的随机数发生器**。

这个提供了一种机制，允许我们在测试环境中**注入**预设的随机数序列，或者根据需要**生成可重现的随机数**。这意味着，在每次测试运行时，即使依赖于随机数，我们也能得到**一致的测试结果**。

### 主要功能

* **种子设置（Seeding）**: 允许用户通过设置一个**种子（seed）**来初始化随机数序列。同一个种子总是会生成相同的随机数序列，这对于测试的可重复性至关重要。
* **序列注入**: 可以预先定义一个随机数序列，并在测试中逐步提供这些数值，而不是真正地随机生成。
* **受控生成**: 提供方法来生成特定范围内的整数、浮点数或布尔值，同时保持可预测性。
* **状态保存与恢复**: 某些实现可能允许保存和恢复随机数生成器的内部状态，以便在复杂测试场景中进行细粒度控制。

### 为什么它很重要？

通过使用这个，我们能够：

* **提高测试稳定性**: 消除随机性引入的不确定因素，确保测试结果可预测。
* **简化问题调试**: 当测试失败时，能够轻松地重现问题，因为随机数序列是固定的。
* **实现边界测试**: 精确控制随机数，以便生成各种边界条件和异常情况进行测试。

简而言之，随机数发生器是单元测试中的一个**关键辅助工具**，它将不确定性转化为可控性，从而大大提升了测试的效率和可靠性。

### 接口

```typescript

/**
 * 随机数发生器接口。同roblox行为.
 * 提供可控的随机数生成能力，尤其适用于单元测试。
 */
export interface RandomGenerator {
    /**
     * 相同的种子将将 x 设置为虚拟随机生成器的种子：相同的种子产生相同的数字序列。确保每次生成的随机数序列一致，这对于测试的可重复性至关重要。
     */
    setSeed(seed: number): void;

    /**
     * 当无参数调用时，返回范围为 到 (包括 但不包括 )的一致假随机实数 (包括 但不包括 )。
     * 当用整数数字 m 调用时，返回范围为 1 到 m 之间的单位假随机整数，包括在内。
     * 当用两个整数 m 和 n 调用时，返回范围为 m 到 n 之间的一致假随机整数。
     */
    next(): number;

}

```